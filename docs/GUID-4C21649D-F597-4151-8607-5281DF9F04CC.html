<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="ICMPv6 Module" />
<meta name="DC.relation" scheme="URI" content="GUID-01A0A1D8-EC9B-4EFF-B8E4-D154B555FEF2.html" />
<meta name="DC.relation" scheme="URI" content="GUID-D879B0D8-C229-4375-B515-581659067E0B.html" />
<meta name="DC.relation" scheme="URI" content="GUID-3AD3867B-D9DE-42C2-885E-C8CF0E03F6D7.html" />
<meta name="DC.relation" scheme="URI" content="GUID-3555C6B6-C107-4BF6-A32C-F8058B608078.html" />
<meta name="DC.relation" scheme="URI" content="GUID-A6A76AE5-5C3B-4584-82E0-8F3AE37EBA55.html" />
<meta name="DC.relation" scheme="URI" content="GUID-84F85A64-1E7B-45A1-BB68-F35B5FD4E974.html" />
<meta name="DC.relation" scheme="URI" content="GUID-7105DF7F-60A9-4F2E-A7E5-784499DF37BF.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="icmpv6-module" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>ICMPv6 Module</title>
<meta name="Microsoft.Help.Id" content="GUID-B1AF6B2B-BC62-4D92-B329-A50140DF3437-icmpv6-module" />
<meta name="Microsoft.Help.TocParent" content="GUID-B1AF6B2B-BC62-4D92-B329-A50140DF3437" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony TCP/IP Library Reference A 10/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-4C21649D-F597-4151-8607-5281DF9F04CC"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="icmpv6-module">
<h1 class="title topictitle1" id="ariaid-title1">ICMPv6 Module</h1><div class="body"><p class="p">This document specifies a set of APIs of Internet Control Message Protocol (ICMP) messages for use with version 6 of the Internet Protocol (IPv6).</p>
<p class="p">The Internet Protocol, version 6 (IPv6) is a new version of IP, uses the Internet Control Message Protocol (ICMP) as defined for IPv4</p>
<p class="p"><span class="xref"></span>, with a number of changes. It is called ICMPv6, and has an IPv6 Next Header value of 58.</p>
<p class="p">ICMPv6 messages are used by IPv6 nodes to report error messages and information messages. ICMPv6 is also used for Ipv6 node diagnostic (i.e., IPv6 ping).</p>
<p class="p">The ICMPv6 protocol also provides a framework for the following:</p>
<p class="p"><em class="ph i">Neighbor Discovery</em></p>
<p class="p">Neighbor Discovery is a series of five ICMPv6 messages that manage node-to-node communication on a link. Neighbor Discovery replaces Address Resolution Protocol (ARP), ICMP (IPv4) Router Discovery, and the ICMP (IPv4) Redirect message.</p>
<p class="p"><em class="ph i">Multicast Listener Discovery (MLD)</em></p>
<p class="p">Multicast Listener Discovery is a series of three ICMP messages that manage subnet multicast membership. Multicast Listener Discovery replaces version 2 of the Internet Group Management Protocol (IGMP) for IPv4.</p>
<p class="p"><em class="ph i">Path MTU Discovery</em></p>
<p class="p">The maximum transmission unit (MTU) for a path is the minimum link MTU of all links on a path between a source and a destination. IPv6 packets that are smaller than the path MTU do not require fragmentation by the host and are successfully forwarded by all routers on the path. To discover the path MTU, the sending host uses the receipt of ICMPv6 Packet Too Big messages.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d64922e44"><span>ICMPv6 Common Messages</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d64922e46"><span>Functions</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e44 "><span>Echo Request</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e46 "><span>Sent to check IPv6 connectivity to a particular host.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e44 "><span>Echo Reply</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e46 "><span>Sent in response to an ICMPv6 Echo Request.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e44 "><span>Destination Unreachable</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e46 "><span>Sent by a router or the destination host to inform the sending host that the packet or payload cannot be delivered.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e44 "><span>Packet to big</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e46 "><span>Sent by a router to inform a sending host that a packet is too large to forward.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e44 "><span>Time exceeded</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e46 "><span>Sent by a router to inform a sending host that the Hop Limit of an IPv6 packet has expired.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e44 "><span>Parameter Problem</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e46 "><span>Sent by a router to inform a sending host that an error was encountered in processing the IPv6 header or an IPv6 extension header.</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Abstraction Model</strong></p>
<p class="p">This module provides software abstraction of the IPv6 module existent in any TCP/IP Stack implementation. It provides error reporting and diagnostics to the TCP/IP stack</p>
<p class="p">IPv6 Block Diagram</p>
<br /><img class="image" src="GUID-9EE9CF05-544E-45CB-ADFB-B84554B61732-low.png" alt="icmpv6" /><br /><p class="p">NDP using ICMPv6 message type communication</p>
<br /><img class="image" src="GUID-0B041792-CEDA-4812-98E9-DE1F8374D404-low.png" alt="icmpv6_communication" /><br /><p class="p"><strong class="ph b">Library Interface</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d64922e103"><span>Name</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d64922e105"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span><strong class="ph b">Functions</strong></span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span> </span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>TCPIP_ICMPV6_CallbackDeregister</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>Deregisters an upper-layer function from ICMPv6 callback.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>TCPIP_ICMPV6_Flush</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>Flushes a ICMPv6 packet.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>TCPIP_ICMPV6_HeaderEchoRequestPut</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>Allocates a packet, IPv6 Header, and Upper-layer header for an ICMPv6 echo request.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>TCPIP_ICMPV6_CallbackRegister</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>Registers an upper-layer function for ICMPv6 callback.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>TCPIP_ICMPV6_EchoRequestSend</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>Sends an ICMPv6 echo request to a remote node.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span><strong class="ph b">Data Types and Constants</strong></span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span> </span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_ERR_DU_CODE</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 Destination Unreachable error code.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_ERR_PP_CODE</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 Parameter Problem error code.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_ERR_TE_CODE</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 Time Exceeded error code.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_HANDLE</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 handle.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_PACKET_TYPES</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 packet types.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_ERR_PTB_CODE</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 Packet Too Big error code.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_INFO_EREQ_CODE</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 Packet Echo Request information code.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>ICMPV6_INFO_ERPL_CODE</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>ICMPv6 Packet Echo Reply information code.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e103 "><span>TCPIP_ICMPV6_PutHeaderEchoReply</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d64922e105 "><span>This is macro TCPIP_ICMPV6_PutHeaderEchoReply.</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="GUID-D879B0D8-C229-4375-B515-581659067E0B.html">TCPIP_ICMPV6_CallbackDeregister Function</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-3AD3867B-D9DE-42C2-885E-C8CF0E03F6D7.html">TCPIP_ICMPV6_CallbackRegister Function</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-3555C6B6-C107-4BF6-A32C-F8058B608078.html">TCPIP_ICMPV6_EchoRequestSend Function</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-A6A76AE5-5C3B-4584-82E0-8F3AE37EBA55.html">TCPIP_ICMPV6_Flush Function</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-84F85A64-1E7B-45A1-BB68-F35B5FD4E974.html">TCPIP_ICMPV6_HeaderEchoRequestPut Function</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-7105DF7F-60A9-4F2E-A7E5-784499DF37BF.html">TCPIP_ICMPV6_PutHeaderEchoReply Macro</a></strong><br />
</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-01A0A1D8-EC9B-4EFF-B8E4-D154B555FEF2.html">MPLABÂ® Harmony TCP/IP Library</a></div>
</div>
</div></body>
</html>