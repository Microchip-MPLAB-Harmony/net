<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="TCPIP_SNMP_VarbindGet Function" />
<meta name="DC.relation" scheme="URI" content="GUID-7764E81C-8FC9-4B3E-8830-255BDE678AA0.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="tcpip-snmp-varbindget-function" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>TCPIP_SNMP_VarbindGet Function</title>
<meta name="Microsoft.Help.Id" content="GUID-B1AF6B2B-BC62-4D92-B329-A50140DF3437-tcpip-snmp-varbindget-function" />
<meta name="Microsoft.Help.TocParent" content="GUID-B1AF6B2B-BC62-4D92-B329-A50140DF3437" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony TCP/IP Library Reference A 10/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-2F85BB10-868F-4CC7-B4DF-D8F780841490"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="tcpip-snmp-varbindget-function">
<h1 class="title topictitle1" id="ariaid-title1">TCPIP_SNMP_VarbindGet Function</h1><div class="body"></div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-7764E81C-8FC9-4B3E-8830-255BDE678AA0.html">SNMP Module</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="ariaid-title2" id="c"><h2 class="title topictitle2" id="ariaid-title2">C</h2><div class="body"><pre class="pre codeblock"><button title="Copy Code" class="copy-code" onclick="cpy('d175441e21', this);">Copy</button><code id="d175441e21" content="bool TCPIP_SNMP_VarbindGet(&#xD;&#xA;    SNMP_ID var, &#xD;&#xA;    SNMP_INDEX index, &#xD;&#xA;    uint8_t* ref, &#xD;&#xA;    SNMP_VAL* val&#xD;&#xA;);&#xD;">bool TCPIP_SNMP_VarbindGet(&#xD;
    SNMP_ID var, &#xD;
    SNMP_INDEX index, &#xD;
    uint8_t* ref, &#xD;
    SNMP_VAL* val&#xD;
);&#xD;</code></pre></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="description"><h2 class="title topictitle2" id="ariaid-title3">Description</h2><div class="body"><p class="p">This is a callback function called by SNMP module. This function is called only when SNMP GET, GETNEXT and GETBULK request is made. This function content is modified by the application developer. This function contains the implementation of READ enable MIB OID macros.</p>
<p class="p">mib2bib.jar Microchip MIB compiler utility is used to generate mib.h, which lists all the MIB OID ID value.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title4" id="preconditions"><h2 class="title topictitle2" id="ariaid-title4">Preconditions</h2><div class="body"><p class="p">TCPIP_SNMP_ProcessVariables() is called.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title5" id="parameters"><h2 class="title topictitle2" id="ariaid-title5">Parameters</h2><div class="body">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d175441e47"><span>Parameters</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d175441e49"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e47 "><span>var</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e49 "><span>Variable id whose value is to be returned.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e47 "><span>index</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e49 "><span>For a scalar variable , Index value is zero. For sequence variable index value specifies which index value need to be set.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e47 "><span>ref</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e49 "><span>Variable reference used to transfer multi-byte data. It is always SNMP_START_OF_VAR when very first byte is requested. Otherwise, use this as a reference to keep track of multi-byte transfers.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e47 "><span>val</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d175441e49 "><span>Up to 4 byte data value: - If var data type is uint8_t, variable value is in val-&gt;byte - If var data type is uint16_t, variable value is in val-&gt;word - If var data type is uint32_t, variable value is in val-&gt;dword.- If var data type is IP_ADDRESS, transfer data in val-&gt;v<span class="xref"></span> or val-&gt;dword - If var data type is COUNTER32, TIME_TICKS or GAUGE32, transfer data in val-&gt;dword - If var data type is ASCII_STRING or OCTET_STRING transfer data in val-&gt;byte using multi-byte transfer mechanism.</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title6" id="returns"><h2 class="title topictitle2" id="ariaid-title6">Returns</h2><div class="body"><ul class="ul"><li class="li"><p class="p">True - If a value exists for given variable.</p>
</li>
<li class="li"><p class="p">False - If a value does not exist for a given variable.</p>
</li>
</ul>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title7" id="remarks"><h2 class="title topictitle2" id="ariaid-title7">Remarks</h2><div class="body"><p class="p">This function may get called more than once depending on number of bytes in a specific get request for given variable. only dynamic read variables needs to be handled.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title8" id="example"><h2 class="title topictitle2" id="ariaid-title8">Example</h2><div class="body"><pre class="pre codeblock"><button title="Copy Code" class="copy-code" onclick="cpy('d175441e96', this);">Copy</button><code id="d175441e96" content="// In the beginning *ref is equal to SNMP_START_OF_VAR&#xD;&#xA;myRef = *ref;&#xD;&#xA;switch(var)&#xD;&#xA;{&#xD;&#xA;// TRAP_COMMUNITY - generated from the Microchip style MIB script using mib2bib.jar,&#xD;&#xA;// is a Sequence variable.&#xD;&#xA;    case TRAP_COMMUNITY:   &#xD;&#xA;        if ( index &lt; trapInfo.Size )&#xD;&#xA;        {&#xD;&#xA;        // check if the myRef should not cross the maximum length &#xD;&#xA;            if ( myRef == trapInfo.table[index].communityLen )&#xD;&#xA;            {&#xD;&#xA;            // End of SNMP GET process&#xD;&#xA;                *ref = SNMP_END_OF_VAR;&#xD;&#xA;                return true;&#xD;&#xA;            }&#xD;&#xA;            if ( trapInfo.table[index].communityLen == 0u )&#xD;&#xA;                *ref = SNMP_END_OF_VAR; // End of SNMP GET process&#xD;&#xA;            else&#xD;&#xA;            {&#xD;&#xA;                // Start of SNMP GET process byte by byte&#xD;&#xA;                val-&gt;byte = trapInfo.table[index].community[myRef];&#xD;&#xA;                myRef++;&#xD;&#xA;                *ref = myRef;&#xD;&#xA;            }&#xD;&#xA;            return true;&#xD;&#xA;        }&#xD;&#xA;        break;&#xD;&#xA;// LED_D5 - generated from the Microchip style MIB script using mib2bib.jar is a scalar variable&#xD;&#xA;    case LED_D5:&#xD;&#xA;        val-&gt;byte = LED2_IO;&#xD;&#xA;        return true;&#xD;&#xA;}   &#xD;">// In the beginning *ref is equal to SNMP_START_OF_VAR&#xD;
myRef = *ref;&#xD;
switch(var)&#xD;
{&#xD;
// TRAP_COMMUNITY - generated from the Microchip style MIB script using mib2bib.jar,&#xD;
// is a Sequence variable.&#xD;
    case TRAP_COMMUNITY:   &#xD;
        if ( index &lt; trapInfo.Size )&#xD;
        {&#xD;
        // check if the myRef should not cross the maximum length &#xD;
            if ( myRef == trapInfo.table[index].communityLen )&#xD;
            {&#xD;
            // End of SNMP GET process&#xD;
                *ref = SNMP_END_OF_VAR;&#xD;
                return true;&#xD;
            }&#xD;
            if ( trapInfo.table[index].communityLen == 0u )&#xD;
                *ref = SNMP_END_OF_VAR; // End of SNMP GET process&#xD;
            else&#xD;
            {&#xD;
                // Start of SNMP GET process byte by byte&#xD;
                val-&gt;byte = trapInfo.table[index].community[myRef];&#xD;
                myRef++;&#xD;
                *ref = myRef;&#xD;
            }&#xD;
            return true;&#xD;
        }&#xD;
        break;&#xD;
// LED_D5 - generated from the Microchip style MIB script using mib2bib.jar is a scalar variable&#xD;
    case LED_D5:&#xD;
        val-&gt;byte = LED2_IO;&#xD;
        return true;&#xD;
}   &#xD;</code></pre></div>
</div>
</body>
</html>