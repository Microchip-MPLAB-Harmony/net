<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>TCPIP_SNMP_VarbindGet Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '03313.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00951.html" target="topic">TCP/IP Stack Libraries Help</a> &gt; <a href="01143.html" target="topic">SNMP Module</a> &gt; <a href="01597.html" target="topic">Library Interface</a> &gt; a) SNMP Module Functions &gt; <a href="03313.html" target="topic">TCPIP_SNMP_VarbindGet Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony TCP/IP Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="01504.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="03307.html" target="topic">Previous</a> | <a href="01597.html" target="topic">Up</a> | <a href="03314.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TCPIP_SNMP_VarbindGet@SNMP_ID@SNMP_INDEX@uint8_t*@SNMP_VAL* Topic Title: TCPIP_SNMP_VarbindGet Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
TCPIP_SNMP_VarbindGet Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This is a callback function called by SNMP module. This function is called only when SNMP GET, GETNEXT and GETBULK request is made. This function content is modified by the application developer. This function contains the implementation of READ enable MIB OID macros.&nbsp;</p>
<p class="Element10">
mib2bib.jar Microchip MIB compiler utility is used to generate mib.h, which lists all the MIB OID ID value.</p></div>
</div>
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">bool</span></strong> <strong><span style="color: #000000">TCPIP_SNMP_VarbindGet</span></strong>(
    <a href="01159.html" target="topic">SNMP_ID</a> <strong><span style="color: #000000">var</span></strong>, 
    <a href="01160.html" target="topic">SNMP_INDEX</a> <strong><span style="color: #000000">index</span></strong>, 
    uint8_t* <strong><span style="color: #000000">ref</span></strong>, 
    <a href="01172.html" target="topic">SNMP_VAL</a>* <strong><span style="color: #000000">val</span></strong>
);</pre></div></div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
TCPIP_SNMP_ProcessVariables() is called.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table3">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
var&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Variable id whose value is to be returned&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
index&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
For a scalar variable , Index value is zero. For sequence variable index value specifies which index value need to be set.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
ref&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Variable reference used to transfer multi-byte data. It is always <a href="01165.html" target="topic">SNMP_START_OF_VAR</a> when very first byte is requested. Otherwise, use this as a reference to keep track of multi-byte transfers.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
val&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Pointer to up to 4 byte buffer:
<ul class="Element631">
<li class="Element601">If var data type is uint8_t, transfer data in val-&gt;byte</li>
<li class="Element601">If var data type is uint16_t, transfer data in val-&gt;word</li>
<li class="Element601">If var data type is uint32_t, transfer data in val-&gt;dword</li>
<li class="Element601">If var data type is IP_ADDRESS, transfer data in val-&gt;v[] or val-&gt;dword</li>
<li class="Element601">If var data type is COUNTER32, TIME_TICKS or GAUGE32, transfer data in val-&gt;dword</li>
<li class="Element601">If var data type is ASCII_STRING or OCTET_STRING transfer data in val-&gt;byte using multi-byte transfer mechanism.</li>
</ul>&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">

<ul class="Element631">
<li class="Element601">true - If a value exists for given variable </li>
<li class="Element601">false - If a value does not exist for a given variable</li>
</ul></p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function may get called more than once depending on number of bytes in a specific get request for given variable. only dynamic read variables needs to be handled.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
Usage of MIB OID within this function for a ASCII string ( multi byte variable) </p><div class="Element13"><div class="Element12"><pre class="Element12">  
  <i><span style="color: #008000">// In the beginning *ref is equal to SNMP_START_OF_VAR</span></i>
  myRef = *ref;
  <strong><span style="color: #000080">switch</span></strong>(var)
  {
  <i><span style="color: #008000">// TRAP_COMMUNITY - generated from the Microchip style MIB script using mib2bib.jar,</span></i>
  <i><span style="color: #008000">// is a Sequence variable.</span></i>
      <strong><span style="color: #000080">case</span></strong> TRAP_COMMUNITY:   
          <strong><span style="color: #000080">if</span></strong> ( index &lt; trapInfo.Size )
          {
          <i><span style="color: #008000">// check if the myRef should not cross the maximum length </span></i>
               <strong><span style="color: #000080">if</span></strong> ( myRef == trapInfo.table[index].communityLen )
               {
               <i><span style="color: #008000">// End of SNMP GET process</span></i>
                   *ref = <a href="01150.html" target="topic">SNMP_END_OF_VAR</a>;
                   <strong><span style="color: #000080">return</span></strong> <strong><span style="color: #000080">true</span></strong>;
               }
              <strong><span style="color: #000080">if</span></strong> ( trapInfo.table[index].communityLen == 0u )
                  *ref = <a href="01150.html" target="topic">SNMP_END_OF_VAR</a>; <i><span style="color: #008000">// End of SNMP GET process</span></i>
              <strong><span style="color: #000080">else</span></strong>
              {
                  <i><span style="color: #008000">// Start of SNMP GET process byte by byte</span></i>
                  val-&gt;byte = trapInfo.table[index].community[myRef];
                  myRef++;
                  *ref = myRef;
              }
              <strong><span style="color: #000080">return</span></strong> <strong><span style="color: #000080">true</span></strong>;
          }
          <strong><span style="color: #000080">break</span></strong>;
  <i><span style="color: #008000">// LED_D5 - generated from the Microchip style MIB script using mib2bib.jar is a scalar variable</span></i>
      <strong><span style="color: #000080">case</span></strong> LED_D5:
          val-&gt;byte = LED2_IO;
          <strong><span style="color: #000080">return</span></strong> <strong><span style="color: #000080">true</span></strong>;
  }</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00951.html" target="topic">TCP/IP Stack Libraries Help</a> &gt; <a href="01143.html" target="topic">SNMP Module</a> &gt; <a href="01597.html" target="topic">Library Interface</a> &gt; a) SNMP Module Functions &gt; <a href="03313.html" target="topic">TCPIP_SNMP_VarbindGet Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB Harmony TCP/IP Help</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="01504.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="03307.html" target="topic">Previous</a> | <a href="01597.html" target="topic">Up</a> | <a href="03314.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TCPIP_SNMP_VarbindGet@SNMP_ID@SNMP_INDEX@uint8_t*@SNMP_VAL* Topic Title: TCPIP_SNMP_VarbindGet Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>